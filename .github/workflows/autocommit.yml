name: ğŸš€ Auto Commit Pro

on:
  push:
    branches:
      - master
      
  schedule:
    - cron: "*/30 * * * *"

jobs:
  auto_commit:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ” Debug Ref
        run: echo "::debug::Ref = ${{github.ref}}"

      - uses: actions/checkout@v3      
        with:
          persist-credentials: false
          fetch-depth: 0

      - name: ğŸ•’ Update Timestamp
        run: |
          d=$(date -u '+%Y-%m-%dT%H:%M:%SZ')
          echo "Last update: $d ğŸš€" > LAST_UPDATED
          
      - name: ğŸ¤– Create Legendary Commit
        run: |
          git config --local user.email "shayanzare2222@gmail.com"
          git config --local user.name "Shayan Zare ğŸš€"

          git add -A

          messages=(
            "ğŸš€ chore(bot): leveling up GitHub stats"
            "ğŸ”¥ chore(bot): keeping the graph green"
            "ğŸŸ¢ chore(bot): commit energy boosted"
            "âš¡ chore(bot): power mode activated"
            "ğŸŒ chore(bot): building the future"
            "ğŸ’ chore(bot): premium auto update"
            "ğŸ‘‘ chore(bot): king of contributions"
            "ğŸŒ¿ chore(bot): growing daily commits"
            "ğŸ§  chore(bot): smart automation running"
            "ğŸ¯ chore(bot): mission green accomplished"
            "ğŸš€âœ¨ chore(bot): super commit deployed"
            "ğŸŸ© chore(bot): making GitHub beautiful"
          )

          rand=$((RANDOM % ${#messages[@]}))
          git commit -m "${messages[$rand]}" || echo "No changes to commit"

      - name: ğŸš€ Push to GitHub
        uses: ad-m/github-push-action@v0.6.0
        with:
          directory: "."
          github_token: ${{ secrets.TOKEN }}